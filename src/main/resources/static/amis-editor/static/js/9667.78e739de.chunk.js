"use strict";(self.webpackChunkjqp_amis_editor=self.webpackChunkjqp_amis_editor||[]).push([[9667],{19667:function(t,e,i){i.r(e),i.d(e,{default:function(){return d}});var n=i(66797),o=i(47313),s=i(98254),r=i.n(s),l=(i(68700),i(61756),i(6170),i(42057),i(47221),i(39850),i(56701),i(27735),i(76720),i(50075),i(88611),i(73754),i(37520),i(51444),i(62308),i(15108),i(32489),i(18553),i(69392),i(35463),i(7713),i(74237),i(49354),i(27986),i(55229),i(51393),i(84489),i(18862),i(55450),i(14578),function(t){function e(e){var i=t.call(this,e)||this;return i.listeningEvents=[],i.element=null,i.editor=null,i.config={immediateReactModelUpdate:!1,reactIgnoreAttrs:null},i.editorInitialized=!1,i.INNER_HTML_ATTR="innerHTML",i.oldModel=null,i}return(0,n.__extends)(e,t),e.prototype.componentDidMount=function(){this.createEditor()},e.prototype.componentWillUnmount=function(){this.destroyEditor()},e.prototype.componentDidUpdate=function(){JSON.stringify(this.oldModel)!=JSON.stringify(this.props.model)&&this.setContent()},e.prototype.clone=function(t){var e,i=this;if(!t)return t;if([Number,String,Boolean].forEach((function(i){t instanceof i&&(e=i(t))})),"undefined"==typeof e)if("[object Array]"===Object.prototype.toString.call(t))e=[],t.forEach((function(t,n,o){e[n]=i.clone(t)}));else if("object"==typeof t)if(t.nodeType&&"function"==typeof t.cloneNode)e=t.cloneNode(!0);else if(t.prototype)e=t;else if(t instanceof Date)e=new Date(t);else for(var n in e={},t)e[n]=i.clone(t[n]);else e=t;return e},e.prototype.createEditor=function(){var t=this;this.editorInitialized||(this.config=this.clone(this.props.config||this.config),this.config=(0,n.__assign)({},this.config),this.element=this.el,this.props.model&&(this.element.innerHTML=this.props.model),this.setContent(),this.registerEvent("initialized",this.config.events&&this.config.events.initialized),this.config.events||(this.config.events={}),this.config.events.initialized=function(){t.editorInitialized=!0,t.initListeners()},this.editor=new(r())(this.element,this.config))},e.prototype.setContent=function(){var t=this;(this.props.model||""==this.props.model)&&(this.oldModel=this.props.model,this.editorInitialized?this.setNormalTagContent():(this._initEvents||(this._initEvents=[]),this._initEvents.push((function(){return t.setNormalTagContent()}))))},e.prototype.setNormalTagContent=function(){var t=this;t.editor.html&&t.editor.html.set(t.props.model||""),t.editorInitialized&&t.editor.undo&&(t.editor.undo.reset(),t.editor.undo.saveStep())},e.prototype.destroyEditor=function(){this.element&&(this.editor.destroy&&this.editor.destroy(),this.listeningEvents.length=0,this.element=null,this.editorInitialized=!1,this._initEvents=[])},e.prototype.getEditor=function(){return this.element?this.editor:null},e.prototype.updateModel=function(){if(this.props.onModelChange){var t="",e=this.editor.html.get();"string"===typeof e&&(t=e),this.oldModel=t,this.props.onModelChange(t)}},e.prototype.initListeners=function(){var t=this;if(this.editor.events.on("contentChanged",(function(){t.updateModel()})),this.config.immediateReactModelUpdate&&this.editor.events.on("keyup",(function(){t.updateModel()})),this._initEvents)for(var e=0;e<this._initEvents.length;e++)this._initEvents[e].call(this.editor)},e.prototype.registerEvent=function(t,e){t&&e&&("initialized"==t?(this._initEvents||(this._initEvents=[]),this._initEvents.push(e)):(this.config.events||(this.config.events={}),this.config.events[t]=e))},e.prototype.render=function(){var t=this;return o.createElement("textarea",{ref:function(e){return t.el=e}},this.props.children)},e}(o.Component)),d=function(t){function e(e){var i=t.call(this,e)||this;return r().VIDEO_PROVIDERS=[{test_regex:/.*/,url_regex:"",url_text:"",html:'<span class="fr-video fr-dvb fr-draggable" contenteditable="false" draggable="true"><video class="fr-draggable" controls="" data-msg="ok" data-status="0" src="{url}" style="width: 600px;"></video></span>'}],i}return(0,n.__extends)(e,t),e.prototype.render=function(){return o.createElement(l,{config:this.props.config,model:this.props.model,onModelChange:this.props.onModelChange})},e}(o.Component)}}]);